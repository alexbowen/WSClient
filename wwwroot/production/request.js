define("request",[],function(){var e=function(){this.data.id=this.createUUID()};return e.prototype={data:{id:null,sender:null,response:[],status:null,content:"test",callback:null,render:null,html:null},init:function(e){var t={};for(var n in this.data)t[n]=e[n]===null?this.data[n]:e[n];this.data=t},setup:function(){this.timestamp(),this.data.sender.status=1},timestamp:function(){var e=(new Date).getTime();return this.data.timestamp=e,this.data.sender.timestamp=e,e},addResponse:function(e){this.data.response||(this.data.response=[]);if(!!this.clientResponseExists(e))return!1;this.data.response.push(e)},alreadyHasPositiveResponse:function(){return this.getLatestResponse()&&this.getResponseStatus()?!0:!1},getResponseStatus:function(){return!!this.getLatestResponse().status},clientResponseExists:function(e){var t=!1,n;if(!this.data.response)return!1;for(n=this.data.response.length-1;n>=0;n--)this.data.response[n].id===e.id&&(t=!0);return t},isCancelled:function(){return this.data.sender.status===0},accept:function(){var e=this.getLatestResponse();e.status=1,e.timestamp=(new Date).getTime()},decline:function(){var e=this.getLatestResponse();e.status=0,e.timestamp=(new Date).getTime()},cancel:function(){this.data.sender.status=0},getStatus:function(){return this.getLatestResponse().status},getLatestResponse:function(){return this.data.response[0]},getFirstResponse:function(){return this.data.response[this.data.response.length-1]},getResponses:function(){return this.data.response},hasResponse:function(){return this.data.response.length>0},getSender:function(){return this.data.sender},get:function(){return this.data},createUUID:function(){var e=[],t="0123456789abcdef";for(var n=0;n<36;n++)e[n]=t.substr(Math.floor(Math.random()*16),1);e[14]="4",e[19]=t.substr(e[19]&3|8,1),e[8]=e[13]=e[18]=e[23]="-";var r=e.join("");return r},setCallback:function(e){this.data.callback=e},setRender:function(e){this.data.render=e},setHtml:function(e){this.data.html=e}},e});