define("client",[],function(){var e=function(e){var t=this;this.options=e,localStorage.clientId?this.options.id=localStorage.clientId:(this.options.id=this.createUUID(),localStorage.clientId=this.options.id),this.connect(),this.connection.on("flushing",function(){t.connection.emit("acknowledge",t.getData())})};return e.prototype={connect:function(){this.connection=io.connect("http://0.0.0.0:5000")},login:function(e){var t=this;this.connection&&this.connection.socket.reconnect(),this.online=!0,this.connection.emit("connect",t.getData(),e)},logout:function(e){this.connection.disconnect(),this.online=!1,e&&e()},response:function(e){this.connection.on("server-response",e)},request:function(e){this.connection.on("server-request",e)},pairRequest:function(){var e=this;this.connection.emit("client-pair-request",this.getData()),this.connection.on("clients-pair-request",function(){arguments[0]&&e.canPair(arguments[0])&&(console.log("im a diff client and on google"),e.connection.emit("client-pair-response",e.getData()))}),this.connection.on("clients-pair-response",function(){arguments[0]&&e.canPair(arguments[0])&&(arguments[0].client.state=2,$(window).trigger("clients-paired"),e.connection.emit("client-update",arguments[0].client),console.log(e.getData()," paired with ",arguments[0].client))})},canPair:function(e){return this.getData().auth?!1:this.id!==e.id&&this.getData().auth.etag===e.auth.etag?!0:!1},getData:function(){return this.options},setData:function(e){this.options=e},createUUID:function(){var e=[],t="0123456789abcdef";for(var n=0;n<36;n++)e[n]=t.substr(Math.floor(Math.random()*16),1);e[14]="4",e[19]=t.substr(e[19]&3|8,1),e[8]=e[13]=e[18]=e[23]="-";var r=e.join("");return r},setState:function(e){this.options.state=e},setAuth:function(e){this.options.auth=e}},e});